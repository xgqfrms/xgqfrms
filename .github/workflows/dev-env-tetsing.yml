# This is a basic workflow to help you get started with Actions

name: ğŸš€ dev token for main branch ğŸ‘»

# æ§åˆ¶ action ä½•æ—¶è¿è¡Œ
# åœ¨ push æˆ– pull è¯·æ±‚æ—¶è§¦å‘å·¥ä½œæµç¨‹äº‹ä»¶ï¼Œä½†ä»…é’ˆå¯¹  master åˆ†æ”¯
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ mian ]

# ä¸€ä¸ª workflow è¿è¡Œç”±å¯ä»¥ä¸²è¡Œæˆ–å¹¶è¡Œè¿è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ª jobs ç»„æˆ
jobs:
  # æ­¤å·¥ä½œæµç¨‹ä»…åŒ…å«ä¸€ä¸ªåä¸º "dev-deploymen" çš„ job /job åç§°: dev-deploymen
  dev-deployment:
    # job å°†è¿è¡Œçš„ runner ç±»å‹(æ‰§è¡Œçš„ç³»ç»Ÿç¯å¢ƒ Linux/ macOS / Windows)
    runs-on: ubuntu-latest
    # ä½¿ç”¨ environment `dev-env`
    environment: dev-env
    
    # æ­¥éª¤è¡¨ç¤ºå°†ä½œä¸º job ä¸€éƒ¨åˆ†æ‰§è¡Œçš„ä¸€ç³»åˆ— tasks
    steps:
      # åœ¨ $GITHUB_WORKSPACEä¸‹æ£€å‡ºä½ çš„repositoryï¼Œä»¥ä¾¿ä½ çš„ job å¯ä»¥è®¿é—®å®ƒ
      # ä½¿ç”¨ - uses 
      - uses: actions/checkout@v2
      # æŒ‡å®š Node.js ç‰ˆæœ¬
      - name: Use Node.js 16.x
        uses: actions/setup-node@v2
        with:
          node-version: 16.x
          cache: 'npm'
          cache-dependency-path: package-lock.json
      # å®‰è£…ä¾èµ–
      - name: Install dependencies
        run: npm ci
      # æ„å»ºé¡¹ç›®
      - name: Build
        run: npm run build
      # ä½¿ç”¨ - name + uses
      - name: ä½¿ç”¨ è‡ªå®šä¹‰ github action
        uses: xgqfrms/github-fe-oss-project-template@v0.0.2
        with:
          # ä½¿ç”¨ dev-env ä¸‹çš„ tokenï¼Œ secrets.DEV_TOKEN_FOR_MAIN
          ghToken: ${{ secrets.DEV_TOKEN_FOR_MAIN }}

      # ä½¿ç”¨ runners shell è¿è¡Œå•ä¸ªå‘½ä»¤
      - name: Run a one-line script âœ… ğŸ‘¨ğŸ»â€ğŸ’»
        run: echo æ­£åœ¨æ‰§è¡Œå•ä¸ªå‘½ä»¤!

      # ä½¿ç”¨ runners shell è¿è¡Œä¸€ç»„å‘½ä»¤
      - name: Run a multi-line script âœ… ğŸ‘¨ğŸ»â€ğŸ’»
        run: |
          echo æ­£åœ¨æ‰§è¡Œå¤šä¸ªå‘½ä»¤çš„
          echo finished ğŸ‰

